{"version":3,"file":"Slider.js","sources":["../../../../src/components/Slider/Slider/Slider.tsx"],"sourcesContent":["import React, { useRef, useState, useEffect, useCallback } from 'react';\nimport { useUncontrolled } from '@mantine/hooks';\nimport { DefaultProps, MantineNumberSize } from '../../../theme';\nimport { MantineTransition } from '../../Transition/Transition';\nimport { getClientPosition } from '../utils/get-client-position/get-client-position';\nimport { getPosition } from '../utils/get-position/get-position';\nimport { getChangeValue } from '../utils/get-change-value/get-change-value';\nimport { getDragEventsAssigner } from '../utils/get-drag-events-assigner/get-drag-events-assigner';\nimport { Thumb, ThumbStylesNames } from '../Thumb/Thumb';\nimport { Track, TrackStylesNames } from '../Track/Track';\nimport { MarksStylesNames } from '../Marks/Marks';\nimport { SliderRoot, SliderRootStylesNames } from '../SliderRoot/SliderRoot';\n\nexport type SliderStylesNames =\n  | SliderRootStylesNames\n  | ThumbStylesNames\n  | TrackStylesNames\n  | MarksStylesNames;\n\nexport interface SliderProps\n  extends DefaultProps<SliderStylesNames>,\n    Omit<React.ComponentPropsWithoutRef<'div'>, 'value' | 'onChange'> {\n  /** Color from theme.colors */\n  color?: string;\n\n  /** Track border-radius from theme or number to set border-radius in px */\n  radius?: MantineNumberSize;\n\n  /** Predefined track and thumb size, number to set sizes in px */\n  size?: MantineNumberSize;\n\n  /** Minimal possible value */\n  min?: number;\n\n  /** Maximum possible value */\n  max?: number;\n\n  /** Number by which value will be incremented/decremented with thumb drag and arrows */\n  step?: number;\n\n  /** Current value for controlled slider */\n  value?: number;\n\n  /** Default value for uncontrolled slider */\n  defaultValue?: number;\n\n  /** Called each time value changes */\n  onChange?(value: number): void;\n\n  /** Hidden input name, use with uncontrolled variant */\n  name?: string;\n\n  /** Marks which will be placed on the track */\n  marks?: { value: number; label?: React.ReactNode }[];\n\n  /** Function to generate label or any react node to render instead, set to null to disable label */\n  label?: React.ReactNode | ((value: number) => React.ReactNode);\n\n  /** Label appear/disappear transition */\n  labelTransition?: MantineTransition;\n\n  /** Label appear/disappear transition duration in ms */\n  labelTransitionDuration?: number;\n\n  /** Label appear/disappear transition timing function, defaults to theme.transitionRimingFunction */\n  labelTransitionTimingFunction?: string;\n\n  /** If true label will be not be hidden when user stops dragging */\n  labelAlwaysOn?: boolean;\n\n  /** Thumb aria-label */\n  thumbLabel?: string;\n}\n\nexport function Slider({\n  themeOverride,\n  classNames,\n  styles,\n  color,\n  value,\n  onChange,\n  size = 'md',\n  radius = 'xl',\n  min = 0,\n  max = 100,\n  step = 1,\n  defaultValue,\n  name,\n  marks = [],\n  label = (f) => f,\n  labelTransition = 'skew-down',\n  labelTransitionDuration = 150,\n  labelTransitionTimingFunction,\n  labelAlwaysOn = false,\n  thumbLabel = '',\n  ...others\n}: SliderProps) {\n  const [dragging, setDragging] = useState(false);\n  const [_value, setValue] = useUncontrolled({\n    value,\n    defaultValue,\n    finalValue: 0,\n    rule: (val) => typeof val === 'number',\n    onChange,\n  });\n  const container = useRef<HTMLDivElement>();\n  const thumb = useRef<HTMLDivElement>();\n  const start = useRef<number>();\n  const offset = useRef<number>();\n  const position = getPosition({ value: _value, min, max });\n  const _label = typeof label === 'function' ? label(_value) : label;\n\n  const handleChange = (val: number) => {\n    if (container.current) {\n      const containerWidth = container.current.getBoundingClientRect().width;\n      const nextValue = getChangeValue({ value: val, containerWidth, min, max, step });\n      setValue(nextValue);\n    }\n  };\n\n  const onDrag = useCallback((event: any) => {\n    container.current && container.current.focus();\n    handleChange(getClientPosition(event) + start.current - offset.current);\n  }, []);\n\n  const onDragEnd = useCallback(() => {\n    setDragging(false);\n  }, []);\n\n  const { assignEvents, removeEvents } = getDragEventsAssigner({\n    onDrag,\n    onDragEnd,\n  });\n\n  useEffect(() => removeEvents, []);\n\n  function handleThumbMouseDown(\n    event: React.MouseEvent<HTMLDivElement> | React.TouchEvent<HTMLDivElement>\n  ) {\n    if (event.cancelable) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n\n    start.current = thumb.current.offsetLeft;\n    offset.current = getClientPosition(event as any);\n\n    assignEvents();\n  }\n\n  const handleTrackMouseDown = (\n    event: React.MouseEvent<HTMLDivElement> | React.TouchEvent<HTMLDivElement>\n  ) => {\n    if (event.cancelable) {\n      event.preventDefault();\n    }\n\n    const changePosition = getClientPosition(event.nativeEvent);\n    const rect = container.current.getBoundingClientRect();\n\n    start.current = changePosition - rect.left;\n    offset.current = changePosition;\n\n    assignEvents();\n    handleChange(changePosition - rect.left);\n  };\n\n  const handleTrackKeydownCapture = (event: React.KeyboardEvent<HTMLDivElement>) => {\n    switch (event.nativeEvent.code) {\n      case 'ArrowUp':\n      case 'ArrowRight': {\n        event.preventDefault();\n        thumb.current.focus();\n        setValue(Math.min(Math.max(_value + step, min), max));\n        break;\n      }\n\n      case 'ArrowDown':\n      case 'ArrowLeft': {\n        event.preventDefault();\n        thumb.current.focus();\n        setValue(Math.min(Math.max(_value - step, min), max));\n        break;\n      }\n\n      default: {\n        break;\n      }\n    }\n  };\n\n  return (\n    <SliderRoot\n      {...others}\n      size={size}\n      elementRef={container}\n      onTouchStart={handleTrackMouseDown}\n      onMouseDown={handleTrackMouseDown}\n      onTouchStartCapture={() => setDragging(true)}\n      onTouchEndCapture={() => setDragging(false)}\n      onMouseDownCapture={() => setDragging(true)}\n      onMouseUpCapture={() => setDragging(false)}\n      onKeyDownCapture={handleTrackKeydownCapture}\n      themeOverride={themeOverride}\n      classNames={classNames}\n      styles={styles}\n    >\n      <Track\n        offset={0}\n        filled={position}\n        marks={marks}\n        size={size}\n        radius={radius}\n        color={color}\n        min={min}\n        max={max}\n        value={_value}\n        themeOverride={themeOverride}\n        onChange={setValue}\n        styles={styles}\n        classNames={classNames}\n      >\n        <Thumb\n          max={max}\n          min={min}\n          value={_value}\n          position={position}\n          dragging={dragging}\n          color={color}\n          size={size}\n          label={_label}\n          elementRef={thumb}\n          onMouseDown={handleThumbMouseDown}\n          labelTransition={labelTransition}\n          labelTransitionDuration={labelTransitionDuration}\n          labelTransitionTimingFunction={labelTransitionTimingFunction}\n          labelAlwaysOn={labelAlwaysOn}\n          themeOverride={themeOverride}\n          classNames={classNames}\n          styles={styles}\n          thumbLabel={thumbLabel}\n        />\n      </Track>\n\n      <input type=\"hidden\" name={name} value={_value} />\n    </SliderRoot>\n  );\n}\n\nSlider.displayName = '@mantine/core/Slider';\n"],"names":["useState","useUncontrolled","useRef","getPosition","getChangeValue","useCallback","getClientPosition","getDragEventsAssigner","useEffect","React","SliderRoot","Track","Thumb"],"mappings":"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"}