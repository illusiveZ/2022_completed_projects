{"version":3,"file":"use-transition.js","sources":["../../../src/components/Transition/use-transition.ts"],"sourcesContent":["import { useState, useRef } from 'react';\nimport { useReducedMotion, useDidUpdate } from '@mantine/hooks';\nimport { MantineThemeOverride, useMantineTheme } from '../../theme';\n\nexport type TransitionStatus =\n  | 'entered'\n  | 'exited'\n  | 'entering'\n  | 'exiting'\n  | 'pre-exiting'\n  | 'pre-entering';\n\ninterface UseTransition {\n  duration: number;\n  timingFunction: string;\n  mounted: boolean;\n  themeOverride: MantineThemeOverride;\n  onEnter?(): void;\n  onExit?(): void;\n  onEntered?(): void;\n  onExited?(): void;\n}\n\nexport function useTransition({\n  duration,\n  timingFunction,\n  mounted,\n  onEnter,\n  onExit,\n  onEntered,\n  onExited,\n  themeOverride,\n}: UseTransition) {\n  const theme = useMantineTheme(themeOverride);\n  const reduceMotion = useReducedMotion();\n  const transitionDuration = reduceMotion ? 0 : duration;\n  const [transitionStatus, setStatus] = useState<TransitionStatus>(mounted ? 'entered' : 'exited');\n  const timeoutRef = useRef<number>(-1);\n\n  const handleStateChange = (shouldMount: boolean) => {\n    const preHandler = shouldMount ? onEnter : onExit;\n    const handler = shouldMount ? onEntered : onExited;\n\n    setStatus(shouldMount ? 'pre-entering' : 'pre-exiting');\n    window.clearTimeout(timeoutRef.current);\n\n    const preStateTimeout = window.setTimeout(() => {\n      typeof preHandler === 'function' && preHandler();\n      setStatus(shouldMount ? 'entering' : 'exiting');\n    }, 10);\n\n    timeoutRef.current = window.setTimeout(() => {\n      window.clearTimeout(preStateTimeout);\n      typeof handler === 'function' && handler();\n      setStatus(shouldMount ? 'entered' : 'exited');\n    }, transitionDuration);\n  };\n\n  useDidUpdate(() => {\n    handleStateChange(mounted);\n  }, [mounted]);\n\n  return {\n    transitionDuration,\n    transitionStatus,\n    transitionTimingFunction: timingFunction || theme.transitionTimingFunction,\n  };\n}\n"],"names":["useMantineTheme","useReducedMotion","useState","useRef","useDidUpdate"],"mappings":";;;;;;;;AAGO,SAAS,aAAa,CAAC;AAC9B,EAAE,QAAQ;AACV,EAAE,cAAc;AAChB,EAAE,OAAO;AACT,EAAE,OAAO;AACT,EAAE,MAAM;AACR,EAAE,SAAS;AACX,EAAE,QAAQ;AACV,EAAE,aAAa;AACf,CAAC,EAAE;AACH,EAAE,MAAM,KAAK,GAAGA,+BAAe,CAAC,aAAa,CAAC,CAAC;AAC/C,EAAE,MAAM,YAAY,GAAGC,sBAAgB,EAAE,CAAC;AAC1C,EAAE,MAAM,kBAAkB,GAAG,YAAY,GAAG,CAAC,GAAG,QAAQ,CAAC;AACzD,EAAE,MAAM,CAAC,gBAAgB,EAAE,SAAS,CAAC,GAAGC,cAAQ,CAAC,OAAO,GAAG,SAAS,GAAG,QAAQ,CAAC,CAAC;AACjF,EAAE,MAAM,UAAU,GAAGC,YAAM,CAAC,CAAC,CAAC,CAAC,CAAC;AAChC,EAAE,MAAM,iBAAiB,GAAG,CAAC,WAAW,KAAK;AAC7C,IAAI,MAAM,UAAU,GAAG,WAAW,GAAG,OAAO,GAAG,MAAM,CAAC;AACtD,IAAI,MAAM,OAAO,GAAG,WAAW,GAAG,SAAS,GAAG,QAAQ,CAAC;AACvD,IAAI,SAAS,CAAC,WAAW,GAAG,cAAc,GAAG,aAAa,CAAC,CAAC;AAC5D,IAAI,MAAM,CAAC,YAAY,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;AAC5C,IAAI,MAAM,eAAe,GAAG,MAAM,CAAC,UAAU,CAAC,MAAM;AACpD,MAAM,OAAO,UAAU,KAAK,UAAU,IAAI,UAAU,EAAE,CAAC;AACvD,MAAM,SAAS,CAAC,WAAW,GAAG,UAAU,GAAG,SAAS,CAAC,CAAC;AACtD,KAAK,EAAE,EAAE,CAAC,CAAC;AACX,IAAI,UAAU,CAAC,OAAO,GAAG,MAAM,CAAC,UAAU,CAAC,MAAM;AACjD,MAAM,MAAM,CAAC,YAAY,CAAC,eAAe,CAAC,CAAC;AAC3C,MAAM,OAAO,OAAO,KAAK,UAAU,IAAI,OAAO,EAAE,CAAC;AACjD,MAAM,SAAS,CAAC,WAAW,GAAG,SAAS,GAAG,QAAQ,CAAC,CAAC;AACpD,KAAK,EAAE,kBAAkB,CAAC,CAAC;AAC3B,GAAG,CAAC;AACJ,EAAEC,kBAAY,CAAC,MAAM;AACrB,IAAI,iBAAiB,CAAC,OAAO,CAAC,CAAC;AAC/B,GAAG,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;AAChB,EAAE,OAAO;AACT,IAAI,kBAAkB;AACtB,IAAI,gBAAgB;AACpB,IAAI,wBAAwB,EAAE,cAAc,IAAI,KAAK,CAAC,wBAAwB;AAC9E,GAAG,CAAC;AACJ;;;;"}